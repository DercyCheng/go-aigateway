# AI Gateway 开发环境配置文件
# ============================================
# 基础设施配置
# ============================================

# 数据库配置
POSTGRES_DB=ai_gateway
POSTGRES_USER=aigateway
POSTGRES_PASSWORD=aigateway_password_2024

# Redis配置
REDIS_ENABLED=true
REDIS_ADDR=redis:6379
REDIS_DB=0
REDIS_PASSWORD=

# ============================================
# 服务发现配置 (Service Discovery)
# ============================================

# 服务发现类型: static, consul, kubernetes, etcd
SERVICE_DISCOVERY_ENABLED=true
SERVICE_DISCOVERY_TYPE=static

# Consul配置 (当使用consul时)
CONSUL_ADDR=consul:8500
CONSUL_DATACENTER=dc1
CONSUL_TOKEN=

# Kubernetes配置 (当使用k8s时)
K8S_NAMESPACE=default
K8S_SERVICE_ACCOUNT=

# 静态服务配置 (当使用static时)
STATIC_SERVICES_CONFIG='{
  "python-models": {
    "host": "python-models",
    "port": 5000,
    "protocol": "http",
    "health_check": "/health",
    "tags": ["model", "inference", "python"]
  },
  "react-frontend": {
    "host": "react-frontend", 
    "port": 3000,
    "protocol": "http",
    "health_check": "/",
    "tags": ["frontend", "web", "react"]
  }
}'

# ============================================
# 协议转换配置 (Protocol Conversion)
# ============================================

# 协议转换总开关
PROTOCOL_CONVERSION_ENABLED=true

# HTTP到gRPC转换
HTTP_TO_GRPC_ENABLED=true
GRPC_GATEWAY_PORT=9090
GRPC_REFLECTION_ENABLED=true

# WebSocket支持
WEBSOCKET_ENABLED=true
WEBSOCKET_PATH=/ws

# GraphQL支持
GRAPHQL_ENABLED=false
GRAPHQL_PATH=/graphql

# REST API版本控制
API_VERSION=v1
API_PREFIX=/api

# ============================================
# 负载均衡配置
# ============================================

# 负载均衡策略: round_robin, weighted_round_robin, least_connections, ip_hash
LOAD_BALANCER_STRATEGY=round_robin

# 健康检查配置
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3

# ============================================
# 认证与安全配置
# ============================================

# JWT配置
JWT_SECRET=your_super_secret_jwt_key_change_in_production_2024
JWT_EXPIRY=24h
JWT_ISSUER=ai-gateway-dev

# OAuth2配置
OAUTH2_ENABLED=false
OAUTH2_CLIENT_ID=
OAUTH2_CLIENT_SECRET=
OAUTH2_REDIRECT_URL=http://localhost:3000/auth/callback

# CORS配置
CORS_ENABLED=true
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:80
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_BURST=10

# ============================================
# 监控与日志配置
# ============================================

# 监控配置
MONITORING_ENABLED=true
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9091
METRICS_PATH=/metrics

# 日志配置
LOG_LEVEL=debug
LOG_FORMAT=json
LOG_OUTPUT=stdout

# 链路追踪
TRACING_ENABLED=false
JAEGER_ENDPOINT=
TRACE_SAMPLING_RATE=0.1

# ============================================
# 性能优化配置
# ============================================

# 连接池配置
DB_MAX_OPEN_CONNS=25
DB_MAX_IDLE_CONNS=10
DB_CONN_MAX_LIFETIME=1h

# 缓存配置
CACHE_ENABLED=true
CACHE_TTL=300s
CACHE_MAX_MEMORY=128mb

# 压缩配置
GZIP_ENABLED=true
GZIP_LEVEL=6

# ============================================
# 第三方API配置
# ============================================

# 阿里云百炼配置
USE_THIRD_PARTY_MODEL=true
BAILIAN_API_KEY=sk-nlorxhdzgcgskdexntrhkleffwdwbwecsuvunqxkpdrclyjo
BAILIAN_ENDPOINT=https://dashscope.aliyuncs.com/api/v1/

# OpenAI配置 (如果使用)
OPENAI_API_KEY=
OPENAI_BASE_URL=

# Hugging Face配置 (中国内地镜像)
HF_ENDPOINT=https://hf-mirror.com
HF_TOKEN=

# ============================================
# 开发环境特定配置
# ============================================

# 调试配置
DEBUG=true
PPROF_ENABLED=true
PPROF_PORT=6060

# 热重载配置
HOT_RELOAD=true
WATCH_PATHS=./internal,./main.go

# 模拟配置
MOCK_EXTERNAL_APIS=false
SIMULATE_NETWORK_DELAY=false

# 数据库调试
DB_DEBUG=true
DB_SLOW_QUERY_THRESHOLD=1s

# ============================================
# 容器资源限制
# ============================================

# Go后端资源限制
GO_BACKEND_MEMORY_LIMIT=1G
GO_BACKEND_CPU_LIMIT=1.0

# Python模型资源限制
PYTHON_MODEL_MEMORY_LIMIT=4G
PYTHON_MODEL_CPU_LIMIT=2.0

# React前端资源限制
REACT_FRONTEND_MEMORY_LIMIT=512M
REACT_FRONTEND_CPU_LIMIT=0.5
