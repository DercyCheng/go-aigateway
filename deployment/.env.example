# AI Gateway 环境配置文件 (中国内地优化版)

# =================================================================
# 基础服务配置
# =================================================================
# 服务端口
PORT=8080
PYTHON_MODEL_PORT=5000
FRONTEND_PORT=3000
NGINX_PORT=80

# 服务主机配置
BACKEND_HOST=go-backend
PYTHON_HOST=python-models
FRONTEND_HOST=react-frontend
REDIS_HOST=redis
POSTGRES_HOST=postgres

# =================================================================
# 数据库配置 (PostgreSQL)
# =================================================================
POSTGRES_DB=ai_gateway
POSTGRES_USER=aigateway
POSTGRES_PASSWORD=aigateway_password_2024
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
DATABASE_URL=postgres://aigateway:aigateway_password_2024@postgres:5432/ai_gateway?sslmode=disable

# =================================================================
# Redis 配置
# =================================================================
REDIS_ENABLED=true
REDIS_ADDR=redis:6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_SENTINEL_ENABLED=false

# =================================================================
# JWT 和安全配置
# =================================================================
JWT_SECRET=your_super_secret_jwt_key_change_in_production_2024
JWT_EXPIRES_IN=24h
API_KEY_PREFIX=ak-
ENCRYPTION_KEY=your_32_char_encryption_key_here

# =================================================================
# 本地模型配置
# =================================================================
LOCAL_MODEL_ENABLED=true
LOCAL_MODEL_HOST=python-models
LOCAL_MODEL_PORT=5000
PYTHON_PATH=python3
MODEL_PATH=/app/models
MODEL_CACHE_DIR=/app/cache/models

# 模型配置
DEFAULT_MODEL_TYPE=chat
DEFAULT_MODEL_SIZE=small
MAX_MODEL_INSTANCES=3
MODEL_TIMEOUT=30s

# =================================================================
# 第三方 AI 服务配置
# =================================================================
# 阿里云百炼 (Dashscope)
BAILIAN_API_KEY=your_bailian_api_key_here
BAILIAN_BASE_URL=https://dashscope.aliyuncs.com/api/v1
USE_THIRD_PARTY_MODEL=false

# OpenAI 兼容配置
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_BASE_URL=https://api.openai.com/v1

# =================================================================
# 服务发现配置
# =================================================================
SERVICE_DISCOVERY_ENABLED=true
SERVICE_DISCOVERY_TYPE=consul
# 支持: consul, etcd, kubernetes, nacos, static

# Consul 配置
CONSUL_ADDR=consul:8500
CONSUL_DATACENTER=dc1
CONSUL_TOKEN=

# Etcd 配置
ETCD_ENDPOINTS=etcd:2379
ETCD_USERNAME=
ETCD_PASSWORD=

# Kubernetes 配置
K8S_NAMESPACE=default
K8S_CONFIG_PATH=/etc/k8s/config

# Nacos 配置
NACOS_SERVER_ADDR=nacos:8848
NACOS_NAMESPACE=public
NACOS_GROUP=DEFAULT_GROUP

# =================================================================
# 协议转换配置
# =================================================================
PROTOCOL_CONVERSION_ENABLED=true
GRPC_PORT=9090
GRPC_REFLECTION_ENABLED=true
HTTP_TO_GRPC_ENABLED=true
GRPC_TO_HTTP_ENABLED=true

# TLS 配置
TLS_ENABLED=false
TLS_CERT_FILE=/etc/ssl/certs/server.crt
TLS_KEY_FILE=/etc/ssl/private/server.key

# =================================================================
# 监控和指标配置
# =================================================================
MONITORING_ENABLED=true
METRICS_PORT=9091
METRICS_PATH=/metrics
PROMETHEUS_ENABLED=true

# 健康检查配置
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s

# =================================================================
# 性能和限流配置
# =================================================================
# 性能优化
PERFORMANCE_OPTIMIZATION_ENABLED=true
REQUEST_TIMEOUT=30s
MAX_REQUEST_SIZE=10MB
GZIP_COMPRESSION=true

# 限流配置
RATE_LIMITING_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=1000
RATE_LIMIT_BURST=100
RATE_LIMIT_STORAGE=redis

# 连接池配置
MAX_IDLE_CONNS=100
MAX_OPEN_CONNS=200
CONN_MAX_LIFETIME=5m

# =================================================================
# 云集成配置
# =================================================================
CLOUD_INTEGRATION_ENABLED=false
CLOUD_PROVIDER=aliyun
# 支持: aliyun, aws, azure, gcp

# 阿里云配置
ALIYUN_ACCESS_KEY_ID=your_aliyun_access_key
ALIYUN_ACCESS_KEY_SECRET=your_aliyun_secret_key
ALIYUN_REGION=cn-hangzhou

# =================================================================
# 日志配置
# =================================================================
LOG_LEVEL=info
LOG_FORMAT=json
LOG_OUTPUT=stdout
LOG_FILE_PATH=/var/log/aigateway.log
LOG_MAX_SIZE=100MB
LOG_MAX_BACKUPS=5
LOG_MAX_AGE=30

# =================================================================
# CORS 配置
# =================================================================
CORS_ENABLED=true
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-API-Key
CORS_ALLOW_CREDENTIALS=true

# =================================================================
# 缓存配置
# =================================================================
CACHE_ENABLED=true
CACHE_TTL=1h
CACHE_MAX_SIZE=1GB
CACHE_CLEANUP_INTERVAL=10m

# =================================================================
# 安全配置
# =================================================================
SECURITY_ENABLED=true
REQUIRE_API_KEY=true
REQUIRE_JWT=true
ENABLE_CSRF_PROTECTION=false
MAX_LOGIN_ATTEMPTS=5
LOGIN_LOCKOUT_DURATION=15m

# =================================================================
# 开发环境配置
# =================================================================
ENV=development
DEBUG=true
HOT_RELOAD=true
AUTO_MIGRATE=true
ENABLE_PROFILING=false

# =================================================================
# 镜像源配置 (中国内地优化)
# =================================================================
# Go 模块代理
GOPROXY=https://goproxy.cn,direct
GOSUMDB=sum.golang.google.cn

# Python PyPI 镜像
PIP_INDEX_URL=https://pypi.tuna.tsinghua.edu.cn/simple
PIP_TRUSTED_HOST=pypi.tuna.tsinghua.edu.cn

# Node.js npm 镜像
NPM_REGISTRY=https://registry.npmmirror.com

# Docker 镜像代理
DOCKER_REGISTRY_MIRROR=https://mirror.ccs.tencentyun.com