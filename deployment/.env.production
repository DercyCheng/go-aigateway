# AI Gateway 生产环境配置文件
# ============================================
# 基础设施配置
# ============================================

# 数据库配置
POSTGRES_DB=ai_gateway_prod
POSTGRES_USER=aigateway_prod
POSTGRES_PASSWORD=your_super_secure_password_change_me_2024

# Redis配置
REDIS_ENABLED=true
REDIS_ADDR=redis:6379
REDIS_DB=0
REDIS_PASSWORD=your_redis_password_change_me

# ============================================
# 服务发现配置 (Service Discovery)
# ============================================

# 生产环境推荐使用consul或kubernetes
SERVICE_DISCOVERY_ENABLED=true
SERVICE_DISCOVERY_TYPE=consul

# Consul配置
CONSUL_ADDR=consul:8500
CONSUL_DATACENTER=dc1
CONSUL_TOKEN=your_consul_token

# 服务注册配置
SERVICE_NAME=ai-gateway
SERVICE_ID=ai-gateway-1
SERVICE_TAGS=gateway,api,ai

# ============================================
# 协议转换配置 (Protocol Conversion)
# ============================================

PROTOCOL_CONVERSION_ENABLED=true
HTTP_TO_GRPC_ENABLED=true
GRPC_GATEWAY_PORT=9090
GRPC_REFLECTION_ENABLED=false  # 生产环境关闭反射

WEBSOCKET_ENABLED=true
WEBSOCKET_PATH=/ws

GRAPHQL_ENABLED=true
GRAPHQL_PATH=/graphql

API_VERSION=v1
API_PREFIX=/api

# ============================================
# 负载均衡配置
# ============================================

LOAD_BALANCER_STRATEGY=least_connections
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=10s
HEALTH_CHECK_TIMEOUT=5s
HEALTH_CHECK_RETRIES=3

# ============================================
# 认证与安全配置
# ============================================

JWT_SECRET=your_production_jwt_secret_minimum_256_bits_2024
JWT_EXPIRY=2h
JWT_ISSUER=ai-gateway-prod

OAUTH2_ENABLED=true
OAUTH2_CLIENT_ID=your_oauth2_client_id
OAUTH2_CLIENT_SECRET=your_oauth2_client_secret
OAUTH2_REDIRECT_URL=https://yourdomain.com/auth/callback

CORS_ENABLED=true
CORS_ALLOWED_ORIGINS=https://yourdomain.com,https://api.yourdomain.com
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization

RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=1000
RATE_LIMIT_BURST=100

# ============================================
# 监控与日志配置
# ============================================

MONITORING_ENABLED=true
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9091
METRICS_PATH=/metrics

LOG_LEVEL=info
LOG_FORMAT=json
LOG_OUTPUT=file

TRACING_ENABLED=true
JAEGER_ENDPOINT=http://jaeger:14268/api/traces
TRACE_SAMPLING_RATE=0.01

# ============================================
# 性能优化配置
# ============================================

DB_MAX_OPEN_CONNS=100
DB_MAX_IDLE_CONNS=50
DB_CONN_MAX_LIFETIME=30m

CACHE_ENABLED=true
CACHE_TTL=3600s
CACHE_MAX_MEMORY=2gb

GZIP_ENABLED=true
GZIP_LEVEL=6

# ============================================
# 第三方API配置
# ============================================

USE_THIRD_PARTY_MODEL=true
BAILIAN_API_KEY=sk-nlorxhdzgcgskdexntrhkleffwdwbwecsuvunqxkpdrclyjo
BAILIAN_ENDPOINT=https://dashscope.aliyuncs.com/api/v1/

HF_ENDPOINT=https://hf-mirror.com
HF_TOKEN=your_hf_token

# ============================================
# 生产环境特定配置
# ============================================

DEBUG=false
PPROF_ENABLED=false

MOCK_EXTERNAL_APIS=false
SIMULATE_NETWORK_DELAY=false

DB_DEBUG=false
DB_SLOW_QUERY_THRESHOLD=500ms

# ============================================
# 容器资源限制
# ============================================

GO_BACKEND_MEMORY_LIMIT=4G
GO_BACKEND_CPU_LIMIT=2.0

PYTHON_MODEL_MEMORY_LIMIT=8G
PYTHON_MODEL_CPU_LIMIT=4.0

REACT_FRONTEND_MEMORY_LIMIT=1G
REACT_FRONTEND_CPU_LIMIT=1.0

# ============================================
# SSL/TLS配置
# ============================================

TLS_ENABLED=true
TLS_CERT_PATH=/etc/ssl/certs/server.crt
TLS_KEY_PATH=/etc/ssl/private/server.key
TLS_MIN_VERSION=1.2

# ============================================
# 备份与恢复配置
# ============================================

BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # 每天凌晨2点
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=your-backup-bucket
