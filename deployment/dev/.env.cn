# AI网关开发环境配置 - 中国大陆优化版
# 针对中国大陆网络环境和AI服务的特殊配置

# 应用配置
APP_NAME=go-aigateway
APP_VERSION=dev-cn
APP_ENV=development
APP_PORT=8080
APP_HOST=0.0.0.0
APP_TIMEZONE=Asia/Shanghai

# 日志配置
LOG_LEVEL=debug
LOG_FORMAT=json
LOG_PATH=/app/logs
LOG_MAX_SIZE=100
LOG_MAX_BACKUPS=7
LOG_MAX_AGE=30

# Redis配置
REDIS_HOST=redis-cn
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_POOL_SIZE=10
REDIS_MAX_RETRIES=3
REDIS_TIMEOUT=5s

# PostgreSQL数据库配置
DB_HOST=postgres-cn
DB_PORT=5432
DB_NAME=aigateway_dev
DB_USER=postgres
DB_PASSWORD=postgres
DB_SSL_MODE=disable
DB_MAX_OPEN_CONNS=25
DB_MAX_IDLE_CONNS=10
DB_CONN_MAX_LIFETIME=5m

# 国内AI服务配置优先

# 智谱AI (ChatGLM)
ZHIPU_API_KEY=your_zhipu_api_key_here
ZHIPU_BASE_URL=https://open.bigmodel.cn/api/paas/v4
ZHIPU_ENABLED=true
ZHIPU_TIMEOUT=30s
ZHIPU_MAX_RETRIES=3

# 百度千帆大模型平台
QIANFAN_API_KEY=your_qianfan_api_key_here
QIANFAN_SECRET_KEY=your_qianfan_secret_key_here
QIANFAN_BASE_URL=https://aip.baidubce.com
QIANFAN_ENABLED=true
QIANFAN_TIMEOUT=30s
QIANFAN_MAX_RETRIES=3

# 阿里云通义千问
DASHSCOPE_API_KEY=your_dashscope_api_key_here
DASHSCOPE_BASE_URL=https://dashscope.aliyuncs.com/api/v1
DASHSCOPE_ENABLED=true
DASHSCOPE_TIMEOUT=30s
DASHSCOPE_MAX_RETRIES=3

# 腾讯混元大模型
HUNYUAN_SECRET_ID=your_hunyuan_secret_id_here
HUNYUAN_SECRET_KEY=your_hunyuan_secret_key_here
HUNYUAN_REGION=ap-beijing
HUNYUAN_ENABLED=true
HUNYUAN_TIMEOUT=30s
HUNYUAN_MAX_RETRIES=3

# 讯飞星火认知大模型
XINGHUO_API_KEY=your_xinghuo_api_key_here
XINGHUO_APP_ID=your_xinghuo_app_id_here
XINGHUO_API_SECRET=your_xinghuo_api_secret_here
XINGHUO_BASE_URL=https://spark-api.xf-yun.com
XINGHUO_ENABLED=true

# 字节跳动豆包大模型
DOUBAO_API_KEY=your_doubao_api_key_here
DOUBAO_BASE_URL=https://ark.cn-beijing.volces.com/api/v3
DOUBAO_ENABLED=true

# OpenAI配置 (作为备选)
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_ENABLED=false
OPENAI_TIMEOUT=60s
OPENAI_MAX_RETRIES=3

# 本地模型配置
LOCAL_MODEL_ENABLED=true
LOCAL_MODEL_HOST=python-model-cn
LOCAL_MODEL_PORT=5000
PYTHON_MODEL_PATH=/app/python
LOCAL_MODEL_TIMEOUT=120s

# 监控配置
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
METRICS_PATH=/metrics
METRICS_NAMESPACE=aigateway

# 安全配置
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173,http://127.0.0.1:3000,http://127.0.0.1:5173
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS,PATCH
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With,X-API-Key
CORS_CREDENTIALS=true

# 限流配置
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_BURST=20
RATE_LIMIT_KEY_GENERATOR=ip

# JWT配置
JWT_SECRET=your_jwt_secret_key_here_change_in_production_cn_dev
JWT_EXPIRY=24h
JWT_REFRESH_EXPIRY=168h
JWT_ISSUER=go-aigateway-cn

# 文件上传配置
MAX_UPLOAD_SIZE=50MB
UPLOAD_PATH=/app/tmp/uploads
ALLOWED_FILE_TYPES=txt,md,pdf,doc,docx,jpg,jpeg,png,gif

# 开发环境特定配置
DEV_MODE=true
HOT_RELOAD=true
DEBUG_MODE=true
PROFILE_ENABLED=true

# 网络配置 (中国大陆优化)
HTTP_TIMEOUT=30s
HTTP_RETRY_COUNT=3
HTTP_RETRY_DELAY=2s
HTTP_KEEPALIVE=30s
HTTP_MAX_IDLE_CONNS=100
HTTP_MAX_IDLE_CONNS_PER_HOST=10

# 代理配置 (根据需要设置)
HTTP_PROXY=
HTTPS_PROXY=
NO_PROXY=localhost,127.0.0.1,::1,redis-cn,postgres-cn,python-model-cn

# 缓存配置
CACHE_ENABLED=true
CACHE_TTL=3600s
CACHE_MAX_SIZE=1000

# 负载均衡配置
LOAD_BALANCER_STRATEGY=round_robin
HEALTH_CHECK_INTERVAL=30s
CIRCUIT_BREAKER_ENABLED=true

# 数据库迁移
AUTO_MIGRATE=true
MIGRATION_PATH=/app/migrations

# API版本控制
API_VERSION=v1
API_PREFIX=/api

# WebSocket配置
WEBSOCKET_ENABLED=true
WEBSOCKET_PATH=/ws
WEBSOCKET_MAX_CONNECTIONS=1000

# 国内CDN和存储配置
CDN_ENABLED=false
CDN_BASE_URL=https://your-cdn.domain.com
STORAGE_TYPE=local
STORAGE_PATH=/app/storage

# 特殊功能开关
FEATURE_FLAG_STREAM_RESPONSE=true
FEATURE_FLAG_BATCH_REQUEST=true
FEATURE_FLAG_MODEL_SWITCHING=true
FEATURE_FLAG_COST_TRACKING=true
